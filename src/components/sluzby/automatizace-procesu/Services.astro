---
import { Icon } from 'astro-icon/components';
import ServicesBentoEffects from '../../react/shared/ServicesBentoEffects.tsx';
import BlurText from '../../react/shared/BlurText.tsx';
import FadeContent from '../../react/shared/FadeContent.tsx';

const services = [
  {
    title: 'Automatizace rutinních úkolů',
    description:
      'Identifikuji procesy, které vás zbytečně zatěžují, a nahradím je automatizovanými řešeními. Ušetříte čas i peníze a snížíte riziko lidských chyb.',
    icon: 'fa6-solid:robot',
  },
  {
    title: 'Webová aplikace',
    description:
      'Vytvořím webovou aplikaci, která vašim zákazníkům zjednoduší život. Bez složitostí, s důrazem na intuitivní ovládání a skutečný přínos.',
    icon: 'fa6-solid:window-restore',
  },
  {
    title: 'Propojení systémů',
    description:
      'Vytvořím most mezi vašimi stávajícími aplikacemi a novými řešeními. Zajistím, aby spolu CRM, skladová logistika či nová webová aplikace komunikovaly bez problémů.',
    icon: 'fa6-solid:diagram-project',
  },
  {
    title: 'Nasazení a podpora',
    description:
      'Nasadím aplikaci na server a zajistím, aby běžela bez problémů. Budu vám k dispozici pro případné úpravy, rozšíření funkcionalit a technický dohled.',
    icon: 'fa6-solid:server',
  },
];
---

<div class="bg-gradient">
  <section
    class="services-section container mx-auto flex min-h-[80vh] items-center justify-center px-3"
    aria-label="Služby"
  >
    <div class="relative">
      <!-- Nadpis -->
      <h2
        class="relative mb-12 select-none text-center text-6xl font-bold text-white sm:text-6xl md:text-8xl xl:text-9xl"
      >
        <!-- Statický fallback pro SEO/crawlery -->
        <noscript> O CO SE POSTARÁM? </noscript>
        <!-- Animovaná verze -->
        <BlurText
          text="O CO SE POSTARÁM?"
          delay={100}
          initialDelay={0}
          animateBy="words"
          direction="top"
          animateOn="view"
          client:only="react"
        />
      </h2>

      <!-- Karty služeb -->
      <div
        class="relative z-10 -mt-16 grid gap-8 sm:-mt-20 md:grid-cols-2 lg:grid-cols-4 lg:auto-rows-fr"
      >
        {
          services.map((service, index) => (
            <FadeContent
              blur={true}
              duration={800}
              delay={600 + index * 200}
              direction="top"
              className="h-full backdrop-blur-sm bg-black/20 rounded-lg"
              client:only="react"
            >
              <article
                class="services-card relative flex h-full w-full flex-col items-center justify-between rounded-lg border border-white/10 p-6 text-center text-white transition-all duration-300 hover:bg-black/40"
                data-card-index={index}
                itemscope
                itemtype="https://schema.org/Service"
              >
                <div class="flex flex-col items-center space-y-4 pt-4">
                  <div class="relative mb-4 flex h-16 items-center justify-center text-white">
                    <Icon name={service.icon} size="48" />
                  </div>
                  <h3 class="text-2xl font-bold leading-tight" lang="cs" itemprop="name">
                    {service.title}
                  </h3>
                </div>
                <div class="relative z-10 mb-4 flex-1 flex items-center">
                  <p class="text-lg leading-relaxed text-white/90" lang="cs" itemprop="description">
                    {service.description}
                  </p>
                </div>
              </article>
            </FadeContent>
          ))
        }
      </div>

      <!-- React efekty s SSR obsahem -->
      <ServicesBentoEffects
        enableStars={true}
        enableSpotlight={true}
        enableBorderGlow={true}
        enableTilt={true}
        enableMagnetism={true}
        clickEffect={true}
        spotlightRadius={300}
        particleCount={12}
        glowColor="132, 0, 255"
        client:idle
      />
    </div>
  </section>
</div>
<style>
  .bg-gradient {
    /* Hodnoty pro původní gradient-under-hero */
    position: relative;

    /* Lineární gradient vypnutý defaultně */
    --linear-active: 1;
    --linear-dir: bottom;
    --linear-start: #000000;
    --linear-end: 30%;

    /* Radiální gradienty */
    --g1-x: 6%;
    --g1-y: 40%;
    --g1-color: #002853;
    --g1-size: 1%;
    --g1-fade: min(10%, 220px);

    --g2-x: 90%;
    --g2-y: 25%;
    --g2-color: #2b0053;
    --g2-size: 1%;
    --g2-fade: min(15%, 220px);

    --g3-x: 68%;
    --g3-y: 80%;
    --g3-color: #002853;
    --g3-size: 0%;
    --g3-fade: min(15%, 180px);

    /* Čtvrtý gradient vypneme */
    --g4-fade: 0%;
  }

  .services-section {
    position: relative;
  }

  .services-card {
    border: 1px solid rgba(255, 255, 255, 0.1);
    overflow: hidden;
    transition: all 0.3s ease-in-out;
  }

  .services-card:hover {
    background-color: rgba(0, 0, 0, 0.4);
    box-shadow:
      0 4px 20px rgba(46, 24, 78, 0.4),
      0 0 30px rgba(132, 0, 255, 0.2);
    cursor: pointer;
  }

  .services-card--border-glow::after {
    content: '';
    position: absolute;
    inset: 0;
    padding: 6px;
    background: radial-gradient(
      var(--glow-radius) circle at var(--glow-x) var(--glow-y),
      rgba(132, 0, 255, calc(var(--glow-intensity) * 0.8)) 0%,
      rgba(132, 0, 255, calc(var(--glow-intensity) * 0.4)) 30%,
      transparent 60%
    );
    border-radius: inherit;
    mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask-composite: subtract;
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1;
  }

  .services-card--border-glow:hover::after {
    opacity: 1;
  }
</style>
