---
import Button from '../Button.astro';
import ArrowDown from '../ArrowDown.astro';
import SocialProof from '../shared/SocialProof.astro';
import LaserBeam from '../shared/LaserBeam.astro';
import HeroPortraitMobile from './HeroPortraitMobile.astro';
import HeroPortrait from '../react/hero/HeroPortrait.tsx';

// JSON-LD structured data pro SEO
const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'Person',
  name: 'VOJTĚCH KOCHTA',
  jobTitle: 'IT Developer',
  description:
    'Freelance IT developer specializující se na UX, front-end a back-end design, řešení technických problémů a rychlé doručení výsledků.',
  url: Astro.site?.origin || 'https://vojtechkochta.cz',
  image: '/images/hero/Portrait.webp',
  sameAs: ['https://github.com/yourusername', 'https://linkedin.com/in/yourusername'],
  address: {
    '@type': 'PostalAddress',
    addressCountry: 'CZ',
    addressLocality: 'Czech Republic',
  },
  knowsAbout: [
    'UX Design',
    'Front-end Development',
    'Back-end Development',
    'Web Development',
    'Process Automation',
    'React',
    'TypeScript',
    'Astro',
    'JavaScript',
  ],
  offers: [
    {
      '@type': 'Service',
      name: 'UX, front-end i back-end design',
      description: 'Kompletní návrh a implementace webových aplikací',
      provider: {
        '@type': 'Person',
        name: 'VOJTĚCH KOCHTA',
      },
    },
    {
      '@type': 'Service',
      name: 'Bleskové KO technických problémů',
      description: 'Rychlé řešení technických výzev a problémů',
      provider: {
        '@type': 'Person',
        name: 'VOJTĚCH KOCHTA',
      },
    },
    {
      '@type': 'Service',
      name: 'Rychlé doručení výsledků',
      description: 'Efektivní dodávka projektů v krátkém čase',
      provider: {
        '@type': 'Person',
        name: 'VOJTĚCH KOCHTA',
      },
    },
  ],
  contactPoint: {
    '@type': 'ContactPoint',
    contactType: 'business inquiry',
    availableLanguage: ['Czech', 'English'],
  },
};

// Pole s položkami pro SocialProof komponentu
const heroItems = [
  { text: 'UX, front-end i back-end design', iconName: 'FaLayerGroup' },
  { text: 'Bleskové KO technických problémů', iconName: 'FaBolt' },
  { text: 'Rychlé doručení výsledků', iconName: 'FaRocket' },
];
---

<!-- JSON-LD Structured Data pro SEO -->
<script type="application/ld+json" is:inline set:html={JSON.stringify(jsonLd)} />

<main id="hlavni-stranka" role="main" aria-label="Hlavní hero sekce" class="relative min-h-screen overflow-hidden">
  <!-- LightRays container - dynamic loading only for desktop/tablet -->
  <div id="lightrays-container" class="absolute inset-0 z-[10] hidden md:block"></div>
  
  <!-- LaserBeam efekty -->
  <LaserBeam 
    position="bottom-left" 
    angle={15} 
    color="orange" 
    startDelay={1000}
    opacity={0.7}
    speed={3}
    width="80%"
  />
  <LaserBeam 
    position="bottom-left" 
    angle={25} 
    color="orange" 
    startDelay={2500}
    opacity={0.4}
    speed={4}
    width="60%"
    className="translate-y-16 translate-x-8"
  />
  
  <!-- Gradient overlay na bottom -->
  <div class="gradient-hero"></div>
  
  
  <!-- CSS Fallback - všechny breakpointy, ale na desktop/tablet méně viditelné -->
  <div class="absolute inset-0 z-[2] bg-gradient-radial from-white/5 via-white/2 to-transparent opacity-30 pointer-events-none md:opacity-10"></div>

  <!-- Obsah Hero sekce -->
  <div
    class="container relative z-20 mx-auto px-3 min-h-screen flex items-center min-[1024px]:max-[1279px]:items-start min-[1024px]:max-[1279px]:pt-16"
  >
    <div
      class="w-full lg:w-4/5 lg:max-w-4xl lg:pr-8 text-center lg:text-left flex flex-col lg:block justify-between lg:justify-start min-h-[80vh] lg:min-h-0 min-[1024px]:max-[1279px]:mt-12"
    >
      <!-- Div 1: Nadpisy a popis -->
      <div class="flex-shrink-0 pt-8 lg:-mt-16 min-[1024px]:max-[1279px]:mt-8">
        <!-- Hlavní nadpis -->
        <h1
          id="hero-heading"
          class="text-4xl sm:text-5xl lg:text-7xl font-extrabold text-orange-500"
        >
          <span class="hero-word-1">VOJTĚCH</span> <span class="hero-word-2">KOCHTA</span>
        </h1>

        <!-- Podnadpis H2 -->
        <h2 class="mb-6 lg:mb-16 text-2xl sm:text-3xl lg:text-6xl text-white">
          <span class="hero-word-3">IT</span> <span class="hero-word-4">developer</span> <span class="hero-word-5">na</span> <span class="hero-word-6">volné</span> <span class="hero-word-7">noze</span>
        </h2>

        <!-- Popis - 3 části animované paralelně -->
        <div class="pb-16 md:pb-0mb-0 lg:mb-8 text-lg lg:text-xl font-medium leading-relaxed text-white px-4 lg:px-0">
          <span class="hero-text-line">
            <span class="hero-word-8">Složte</span> <span class="hero-word-9">k</span> <span class="hero-word-10">zemi</span> <span class="hero-word-11">svou</span> <span class="hero-word-12">konkurenci.</span> <span class="hero-word-13">Navrhuji</span> <span class="hero-word-14">a</span> <span class="hero-word-15">stavím</span> <span class="hero-word-16">weby</span> <span class="hero-word-17">a</span> <span class="hero-word-18">pomáhám</span>
          </span>
          <span class="hero-text-line">
            <span class="hero-word-19">automatizovat</span> <span class="hero-word-20">rutinní</span> <span class="hero-word-21">úkoly.</span> <span class="hero-word-22">Mým</span> <span class="hero-word-23">nejčastějším</span> <span class="hero-word-24">klientem</span> <span class="hero-word-25">jsou</span> <span class="hero-word-26">malé</span> <span class="hero-word-27">a</span>
          </span>
          <span class="hero-text-line">
            <span class="hero-word-28">střední</span> <span class="hero-word-29">firmy,</span> <span class="hero-word-30">které</span> <span class="hero-word-31">preferují</span> <span class="hero-word-32">jasnou</span> <span class="hero-word-33">komunikaci</span> <span class="hero-word-34">a</span> <span class="hero-word-35">chtějí</span> <span class="hero-word-36">ušetřit</span> <span class="hero-word-37">čas.</span>
          </span>
        </div>
      </div>

      <!-- Div 2: SocialProof karty a tlačítko -->
      <div class="flex-shrink-0 lg:pb-0 md:-mt-8">
        <!-- SocialProof karty -->
        <div class="mb-6 lg:mb-8 flex justify-center lg:justify-start px-2 lg:px-0 hero-animate hero-animate-4">
          <SocialProof
            items={heroItems}
            containerClass="flex gap-2 lg:gap-3"
            itemClass="flex-1"
            minHeight="min-h-[80px] lg:min-h-[92px]"
            maxWidth="max-w-full lg:max-w-3xl"
          />
        </div>

        <!-- Call to Action Button -->
        <div class="flex justify-center lg:justify-start hero-animate hero-animate-5">
          <Button
            text="Poptat nezávaznou konzultaci"
            href="#kontaktni-formular"
            variant="solid"
            class="max-w-sm"
          />
        </div>
      </div>
    </div>
  </div>

  <!-- Portrét - Mobilní (pod textem) -->
  <div class="relative w-full z-10 pointer-events-none flex md:hidden justify-center items-center">
    <HeroPortraitMobile />
  </div>

  <!-- Portrét - Tablet a Desktop (md+ breakpointy) s GridDistortion efektem -->
  <div class="absolute top-0 left-0 w-full min-h-screen z-[3] pointer-events-none hidden md:flex">
    <div class="container mx-auto px-3 flex w-full min-h-screen">
      <!-- Levá strana - 50% prázdná -->
      <div class="w-0 lg:w-1/2 min-[1024px]:max-[1279px]:w-1/3"></div>

      <!-- Pravá strana - 50% s portrétem -->
      <div class="w-full lg:w-1/2 min-[1024px]:max-[1279px]:w-2/3 relative">
        <!-- Statický fallback pro LCP -->
        <picture>
          <source srcset="/images/hero/Portrait.avif" type="image/avif" />
          <source srcset="/images/hero/Portrait.webp" type="image/webp" />
          <img
            src="/images/hero/Portrait.webp"
            alt="Hero portrait"
            class="absolute bottom-0 w-5/6 lg:w-full min-[1024px]:max-[1279px]:w-full h-auto object-contain mx-auto left-0 right-0"
            style="aspect-ratio: 730/786;"
            width={730}
            height={786}
            loading="eager"
            fetchpriority="high"
            decoding="sync"
            id="hero-portrait-static"
          />
        </picture>
        <!-- React komponenta převezme kontrolu po hydrataci -->
        <HeroPortrait client:idle />
      </div>
    </div>
  </div>

  <!-- Šipka dolů -->
  <div class="hidden sm:block">
    <ArrowDown targetId="moje-sluzby" />
  </div>
</main>

<!-- LightRays loading -->
<script>
  import '../../scripts/lightRaysManager.ts';
</script>